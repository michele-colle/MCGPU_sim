 
# 
# >>>> INPUT FILE FOR MC-GPU v1.5 VICTRE-DBT >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
#                
#  Geometria 7G
#  per eseguire:
#  cd example_simulations
#  ./MC-GPU_v1.5b.x cbct_circular.in | tee cbct_circular.out
#

#[SECTION SIMULATION CONFIG v.2009-05-12]
1.0e11                        # Simulating only 1% of the expected mammo exposure for testing!    ORIGINAL HISTORIES:  3.4e11             # TOTAL NUMBER OF HISTORIES, OR SIMULATION TIME IN SECONDS IF VALUE < 100000
55567891              # RANDOM SEED (ranecu PRNG)
10                              # GPU NUMBER TO USE WHEN MPI IS NOT USED, OR TO BE AVOIDED IN MPI RUNS
128                           # GPU THREADS PER CUDA BLOCK (multiple of 32)
5000                         # SIMULATED HISTORIES PER GPU THREAD
 
#[SECTION SOURCE v.2016-12-02]
spectrum/120kV_Al150um_Brass60um.spc    # X-RAY ENERGY SPECTRUM FILE
 0.0   -57.8   0.0          #  SOURCE POSITION: X (chest-to-nipple), Y (right-to-left), Z (caudal-to-cranial) [cm]
 0.0    1.0    0.0             # SOURCE DIRECTION COSINES: U V W
-1   -1    # ==> 2/3 original angle of 11.203       # TOTAL AZIMUTHAL (WIDTH, X) AND POLAR (HEIGHT, Z) APERTURES OF THE FAN BEAM [degrees] (input negative to automatically cover the whole detector)
0.0  0.0   0.0             # EULER ANGLES (RzRyRz) TO ROTATE RECTANGULAR BEAM FROM DEFAULT POSITION AT Y=0, NORMAL=(0,-1,0)
 0.0                         # SOURCE GAUSSIAN FOCAL SPOT FWHM [cm]
 0.0        # 0.18 for DBT, 0 for FFDM [Mackenzie2017]     # ANGULAR BLUR DUE TO MOVEMENT ([exposure_time]*[angular_speed]) [degrees]
NO                             # COLLIMATE BEAM TOWARDS POSITIVE AZIMUTHAL (X) ANGLES ONLY? (ie, cone-beam center aligned with chest wall in mammography) [YES/NO]
 
#[SECTION IMAGE DETECTOR v.2017-06-20]
results/water_cylinder256x256x2float   # OUTPUT IMAGE FILE NAME
256      256                  # NUMBER OF PIXELS IN THE IMAGE: Nx Nz
29.34    29.34                 # IMAGE SIZE (width, height): Dx Dz [cm]
98.70                           # SOURCE-TO-DETECTOR DISTANCE (detector set in front of the source, perpendicular to the initial direction)
 0.0    0.0                     # IMAGE OFFSET ON DETECTOR PLANE IN WIDTH AND HEIGHT DIRECTIONS (BY DEFAULT BEAM CENTERED AT IMAGE CENTER) [cm]
 0.035                         # DETECTOR THICKNESS [cm] 0.035 for 7G 1000 for ideal
 0.0274                       # ==> MFP(CsI,59.6keV -> 0.0274)   # DETECTOR MATERIAL MEAN FREE PATH AT AVERAGE ENERGY [cm]
 1000000.0 11223.0 0.596 0.00593  # DETECTOR K-EDGE ENERGY [eV], K-FLUORESCENCE ENERGY [eV], K-FLUORESCENCE YIELD, MFP AT FLUORESCENCE ENERGY [cm]
 0    0.99                   # EFECTIVE DETECTOR GAIN, W_+- [eV/ehp], AND SWANK FACTOR (input 0 to report ideal energy fluence)
 0.0                         # ADDITIVE ELECTRONIC NOISE LEVEL (electrons/pixel)
 0.0  1.9616          # ==> MFP(polystyrene,19keV)       # PROTECTIVE COVER THICKNESS (detector+grid) [cm], MEAN FREE PATH AT AVERAGE ENERGY [cm]
 0.0   31.0   0.0065            # ANTISCATTER GRID RATIO, FREQUENCY, STRIP THICKNESS [X:1, lp/cm, cm] (enter 0 to disable the grid)
 0.00089945   1.9616   # ==> MFP(lead&polystyrene,19keV)  # ANTISCATTER STRIPS AND INTERSPACE MEAN FREE PATHS AT AVERAGE ENERGY [cm]
 0                              # ORIENTATION 1D FOCUSED ANTISCATTER GRID LINES: 0==STRIPS PERPENDICULAR LATERAL DIRECTION (mammo style); 1==STRIPS PARALLEL LATERAL DIRECTION (DBT style)

#[SECTION TOMOGRAPHIC TRAJECTORY v.2016-12-02]
1       # ==> 1 for mammo only; ==> 25 for mammo + DBT    # NUMBER OF PROJECTIONS (1 disables the tomographic mode)
57.8                            # SOURCE-TO-ROTATION AXIS DISTANCE serve per ofsettare il centro di rotazione, mettere uguale -source position
2.0                             # ANGLE BETWEEN PROJECTIONS (360/num_projections for full CT) [degrees]
0.0                             # ANGULAR ROTATION TO FIRST PROJECTION (USEFUL FOR DBT, INPUT SOURCE DIRECTION CONSIDERED AS 0 DEGREES) [degrees]
0.0  0.0  1.0                   # AXIS OF ROTATION (Vx,Vy,Vz)
0.0                             # TRANSLATION ALONG ROTATION AXIS BETWEEN PROJECTIONS (HELICAL SCAN) [cm]
NO                             # KEEP DETECTOR FIXED AT 0 DEGREES FOR DBT? [YES/NO]
NO                             # SIMULATE BOTH 0 deg PROJECTION AND TOMOGRAPHIC SCAN (WITHOUT GRID) WITH 2/3 TOTAL NUM HIST IN 1st PROJ (eg, DBT+mammo)? [YES/NO]

#[SECTION DOSE DEPOSITION v.2012-12-12]
NO                             # TALLY MATERIAL DOSE? [YES/NO] (electrons not transported, x-ray energy locally deposited at interaction)
NO                              # TALLY 3D VOXEL DOSE? [YES/NO] (dose measured separately for each voxel)
mc-gpu_dose.dat                 # OUTPUT VOXEL DOSE FILE NAME
  1  751                        # VOXEL DOSE ROI: X-index min max (first voxel has index 1)
  1 1301                        # VOXEL DOSE ROI: Y-index min max
250  250                        # VOXEL DOSE ROI: Z-index min max
 
#[SECTION VOXELIZED GEOMETRY FILE v.2017-07-26]
phantom/icrp_female_head_material160x137x61.raw     # VOXEL GEOMETRY FILE (penEasy 2008 format; .gz accepted)
 -7.100  -6.079  -7.381              # OFFSET OF THE VOXEL GEOMETRY [cm]
 160 137 61                 # NUMBER OF VOXELS
 0.089 0.089 0.242           # VOXEL SIZES [cm]
 1 1 1                          # SIZE OF LOW RESOLUTION VOXELS
# SIZE OF LOW RESOLUTION VOXELS THAT WILL BE DESCRIBED BY A BINARY TREE, GIVEN AS POWERS OF TWO (eg, 2 2 3 = 2^2x2^2x2^3 = 128 input voxels per low res voxel; 0 0 0 disables tree)
 
#[SECTION MATERIAL FILE LIST v.2020-03-03] #air density=0.0012
material/icrp_air.mcgpu density=0.0012 voxelId=0
material/G4_ICRP_female/icrp_teeth.mcgpu density=2.750000 voxelId=1
material/G4_ICRP_female/icrp_bone.mcgpu density=1.920000 voxelId=2
material/G4_ICRP_female/icrp_humeri_upper.mcgpu density=1.185000 voxelId=3
material/G4_ICRP_female/icrp_humeri_lower.mcgpu density=1.117000 voxelId=4
material/G4_ICRP_female/icrp_arm_lower.mcgpu density=1.117000 voxelId=5
material/G4_ICRP_female/icrp_hand.mcgpu density=1.117000 voxelId=6
material/G4_ICRP_female/icrp_clavicle.mcgpu density=1.191000 voxelId=7
material/G4_ICRP_female/icrp_cranium.mcgpu density=1.245000 voxelId=8
material/G4_ICRP_female/icrp_femora_upper.mcgpu density=1.046000 voxelId=9
material/G4_ICRP_female/icrp_femora_lower.mcgpu density=1.117000 voxelId=10
material/G4_ICRP_female/icrp_leg_lower.mcgpu density=1.117000 voxelId=11
material/G4_ICRP_female/icrp_foot.mcgpu density=1.117000 voxelId=12
material/G4_ICRP_female/icrp_mandible.mcgpu density=1.189000 voxelId=13
material/G4_ICRP_female/icrp_pelvis.mcgpu density=1.109000 voxelId=14
material/G4_ICRP_female/icrp_ribs.mcgpu density=1.092000 voxelId=15
material/G4_ICRP_female/icrp_scapulae.mcgpu density=1.128000 voxelId=16
material/G4_ICRP_female/icrp_spine_cervical.mcgpu density=1.135000 voxelId=17
material/G4_ICRP_female/icrp_spine_thoratic.mcgpu density=1.084000 voxelId=18
material/G4_ICRP_female/icrp_spine_lumbar.mcgpu density=1.171000 voxelId=19
material/G4_ICRP_female/icrp_sacrum.mcgpu density=1.052000 voxelId=20
material/G4_ICRP_female/icrp_sternum.mcgpu density=1.076000 voxelId=21
material/G4_ICRP_female/icrp_hf_upper.mcgpu density=0.980000 voxelId=22
material/G4_ICRP_female/icrp_hf_lower.mcgpu density=0.980000 voxelId=23
material/G4_ICRP_female/icrp_med_lowerarm.mcgpu density=0.980000 voxelId=24
material/G4_ICRP_female/icrp_med_lowerleg.mcgpu density=0.980000 voxelId=25
material/G4_ICRP_female/icrp_cartilage.mcgpu density=1.100000 voxelId=26
material/G4_ICRP_female/icrp_skin.mcgpu density=1.090000 voxelId=27
material/G4_ICRP_female/icrp_blood.mcgpu density=1.060000 voxelId=28
material/G4_ICRP_female/icrp_muscle.mcgpu density=1.050000 voxelId=29
material/G4_ICRP_female/icrp_liver.mcgpu density=1.050000 voxelId=30
material/G4_ICRP_female/icrp_pancreas.mcgpu density=1.050000 voxelId=31
material/G4_ICRP_female/icrp_brain.mcgpu density=1.050000 voxelId=32
material/G4_ICRP_female/icrp_heart.mcgpu density=1.050000 voxelId=33
material/G4_ICRP_female/icrp_eye.mcgpu density=1.050000 voxelId=34
material/G4_ICRP_female/icrp_kidney.mcgpu density=1.050000 voxelId=35
material/G4_ICRP_female/icrp_stomach.mcgpu density=1.040000 voxelId=36
material/G4_ICRP_female/icrp_intestine_sml.mcgpu density=1.040000 voxelId=37
material/G4_ICRP_female/icrp_intestine_lrg.mcgpu density=1.040000 voxelId=38
material/G4_ICRP_female/icrp_spleen.mcgpu density=1.040000 voxelId=39
material/G4_ICRP_female/icrp_thyroid.mcgpu density=1.040000 voxelId=40
material/G4_ICRP_female/icrp_bladder.mcgpu density=1.040000 voxelId=41
material/G4_ICRP_female/icrp_ovaries_testes.mcgpu density=1.040000 voxelId=42
material/G4_ICRP_female/icrp_adrenals.mcgpu density=1.030000 voxelId=43
material/G4_ICRP_female/icrp_oesophagus.mcgpu density=1.030000 voxelId=44
material/G4_ICRP_female/icrp_misc.mcgpu density=1.030000 voxelId=45
material/G4_ICRP_female/icrp_uterus_prostate.mcgpu density=1.030000 voxelId=46
material/G4_ICRP_female/icrp_lymph.mcgpu density=1.030000 voxelId=47
material/G4_ICRP_female/icrp_breast_glandular.mcgpu density=1.020000 voxelId=48
material/G4_ICRP_female/icrp_breast_adipose.mcgpu density=0.950000 voxelId=49
material/G4_ICRP_female/icrp_lung.mcgpu density=0.385000 voxelId=50
material/G4_ICRP_female/icrp_gastro_content.mcgpu density=1.040000 voxelId=51
material/G4_ICRP_female/icrp_urine.mcgpu density=1.040000 voxelId=52
 
# >>>> END INPUT FILE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
 
